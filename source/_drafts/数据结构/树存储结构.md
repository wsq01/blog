

# 树存储结构
树结构是一种非线性存储结构，存储的是具有“一对多”关系的数据元素的集合。

{% asset_img 1.png %}

上图是使用树结构存储的集合`{A,B,C,D,E,F,G,H,I,J,K,L,M}`的示意图。对于数据`A`来说，和数据`B、C、D`有关系；对于数据`B`来说，和`E、F`有关系。这就是“一对多”的关系。

整个存储形状在逻辑结构上看，类似于实际生活中倒着的树，所以称这种存储结构为“树型”存储结构。
## 树的结点
* 结点：使用树结构存储的每一个数据元素都被称为“结点”。图中，数据元素`A`就是一个结点；
* 父结点（双亲结点）、子结点和兄弟结点：对于图中的结点`A、B、C、D`来说，`A`是`B、C、D`结点的父结点（也称为“双亲结点”），而`B、C、D`都是`A`结点的子结点（也称“孩子结点”）。对于`B、C、D`来说，它们都有相同的父结点，所以它们互为兄弟结点。
* 树根结点（简称“根结点”）：每一个非空树都有且只有一个被称为根的结点。图中，结点 A 就是整棵树的根结点。
树根的判断依据为：如果一个结点没有父结点，那么这个结点就是整棵树的根结点。
* 叶子结点：如果结点没有任何子结点，那么此结点称为叶子结点（叶结点）。例如图中，结点`K、L、F、G、M、I、J`都是这棵树的叶子结点。

## 子树和空树
* 子树：如图中，整棵树的根结点为结点`A`，而如果单看结点`B、E、F、K、L`组成的部分来说，也是棵树，而且节点`B`为这棵树的根结点。所以称`B、E、F、K、L`这几个结点组成的树为整棵树的子树；同样，结点`E、K、L`构成的也是一棵子树，根结点为`E`。
注意：单个结点也是一棵树，只不过根结点就是它本身。图中，结点`K、L、F`等都是树，且都是整棵树的子树。
知道了子树的概念后，树也可以这样定义：树是由根结点和若干棵子树构成的。
* 空树：如果集合本身为空，那么构成的树就被称为空树。空树中没有结点。
补充：在树结构中，对于具有同一个根结点的各个子树，相互之间不能有交集。例如，图中，除了根结点`A`，其余元素又各自构成了三个子树，根结点分别为`B、C、D`，这三个子树相互之间没有相同的结点。如果有，就破坏了树的结构，不能算做是一棵树。

## 结点的度和层次
对于一个结点，拥有的子树数（结点有多少分支）称为结点的度（`Degree`）。例如，图中，根结点`A`下分出了 3 个子树，所以，结点`A`的度为 3。

一棵树的度是树内各结点的度的最大值。图表示的树中，各个结点的度的最大值为 3，所以，整棵树的度的值是 3。

结点的层次：从一棵树的树根开始，树根所在层为第一层，根的孩子结点所在的层为第二层，依次类推。对于图来说，`A`结点在第一层，`B、C、D`为第二层，`E、F、G、H、I、J`在第三层，`K、L、M`在第四层。

一棵树的深度（高度）是树中结点所在的最大的层次。图树的深度为 4。

如果两个结点的父结点虽不相同，但是它们的父结点处在同一层次上，那么这两个结点互为堂兄弟。例如，图中，结点`G`和`E、F、H、I、J`的父结点都在第二层，所以之间为堂兄弟的关系。
## 有序树和无序树
如果树中结点的子树从左到右看，谁在左边，谁在右边，是有规定的，这棵树称为有序树；反之称为无序树。

在有序树中，一个结点最左边的子树称为"第一个孩子"，最右边的称为"最后一个孩子"。

拿图来说，如果是其本身是一棵有序树，则以结点`B`为根结点的子树为整棵树的第一个孩子，以结点`D`为根结点的子树为整棵树的最后一个孩子。
## 森林
由`m（m >= 0）`个互不相交的树组成的集合被称为森林。图中，分别以`B、C、D`为根结点的三棵子树就可以称为森林。

树可以理解为是由根结点和若干子树构成的，而这若干子树本身是一个森林，所以，树还可以理解为是由根结点和森林组成的。用一个式子表示为：
```
Tree =（root,F）
```
其中，`root`表示树的根结点，`F`表示由`m（m >= 0）`棵树组成的森林。

树型存储结构类似于家族的族谱，各个结点之间也同样可能具有父子、兄弟、表兄弟的关系。
# 二叉树
简单地理解，满足以下两个条件的树就是二叉树：
* 本身是有序树；
* 树中包含的各个节点的度不能超过 2，即只能是 0、1 或者 2；

{% asset_img 2.png %}

## 二叉树的性质
二叉树具有以下几个性质：
1. 二叉树中，第`i`层最多有`2i-1`个结点。
2. 如果二叉树的深度为`K`，那么此二叉树最多有`2K-1`个结点。
3. 二叉树中，终端结点数（叶子结点数）为 $n_0$，度为 2 的结点数为 $n_2$，则 $n_0$ = $n_2$ +1。

性质 3 的计算方法为：对于一个二叉树来说，除了度为 0 的叶子结点和度为 2 的结点，剩下的就是度为 1 的结点（设为 $n_1$ ），那么总结点 n= $n_0$ + $n_1$ + $n_2$ 。
同时，对于每一个结点来说都是由其父结点分支表示的，假设树中分枝数为`B`，那么总结点数`n=B+1`。而分枝数是可以通过 $n_1$ 和 $n_2$ 表示的，即 B= $n_1$ +2* $n_2$ 。所以，n 用另外一种方式表示为 n= $n_1$ +2* $n_2$ +1。
两种方式得到的 n 值组成一个方程组，就可以得出 $n_0$ = $n_2$+1。


二叉树还可以继续分类，衍生出满二叉树和完全二叉树。
## 满二叉树
如果二叉树中除了叶子结点，每个结点的度都为 2，则此二叉树称为满二叉树。

{% asset_img 3.png %}

满二叉树除了满足普通二叉树的性质，还具有以下性质：
1. 满二叉树中第`i`层的节点数为 $2^{n-1}$ 个。
2. 深度为`k`的满二叉树必有 $2^{k-1}$ 个节点 ，叶子数为 $2^{k-1}$。
3. 满二叉树中不存在度为 1 的节点，每一个分支点中都两棵深度相同的子树，且叶子节点都在最底层。
4. 具有`n`个节点的满二叉树的深度为 $log_2(n+1)$ 。

## 完全二叉树
如果二叉树中除去最后一层节点为满二叉树，且最后一层的结点依次从左到右分布，则此二叉树被称为完全二叉树。

{% asset_img 4.png %}

完全二叉树除了具有普通二叉树的性质，它自身也具有一些独特的性质，比如说，`n`个结点的完全二叉树的深度为⌊ $log_2n$ ⌋ +1。

⌊ $log_2n$ ⌋ 表示取小于 $log_2n$ 的最大整数。例如，⌊ $log_24$ ⌋ = 2，而 ⌊ $log_25$ ⌋ 结果也是 2。

对于任意一个完全二叉树来说，如果将含有的结点按照层次从左到右依次标号，对于任意一个结点`i`，完全二叉树还有以下几个结论成立：
* 当`i>1`时，父亲结点为结点`[i/2]`。（`i=1`时，表示的是根结点，无父亲结点）
* 如果`2*i>n`（总结点的个数），则结点`i`肯定没有左孩子（为叶子结点）；否则其左孩子是结点`2*i`。
* 如果`2*i+1>n`，则结点`i`肯定没有右孩子；否则右孩子是结点`2*i+1`。

# 二叉树的顺序存储结构
二叉树的存储结构有两种，分别为顺序存储和链式存储。

二叉树的顺序存储，指的是使用顺序表（数组）存储二叉树。需要注意的是，顺序存储只适用于完全二叉树。换句话说，只有完全二叉树才可以使用顺序表存储。因此，如果我们想顺序存储普通二叉树，需要提前将普通二叉树转化为完全二叉树。

满二叉树也可以使用顺序存储。要知道，满二叉树也是完全二叉树，因为它满足完全二叉树的所有特征。

普通二叉树转完全二叉树的方法很简单，只需给二叉树额外添加一些节点，将其"拼凑"成完全二叉树即可。

{% asset_img 5.png %}

完全二叉树的顺序存储，仅需从根节点开始，按照层次依次将树中节点存储到数组即可。

{% asset_img 6.png %}

其存储状态如图所示：

{% asset_img 7.png %}

由此，我们就实现了完全二叉树的顺序存储。

不仅如此，从顺序表中还原完全二叉树也很简单。我们知道，完全二叉树具有这样的性质，将树中节点按照层次并从左到右依次标号（1,2,3,...），若节点`i`有左右孩子，则其左孩子节点为`2*i`，右孩子节点为 `2*i+1`。此性质可用于还原数组中存储的完全二叉树。

