

# 如何根据掩码来确定IP地址网段
要想判断两个ip地址是不是在同一个网段，只需将ip地址与子网掩码做与运算，如果得出的结果一样，则这两个ip地址是同一个子网当中。

## 示例
IP 地址 1：`192.168.1.1`，子网掩码：`255.255.252.0`。
IP 地址 2：`192.168.2.1`，子网掩码：`255.255.252.0`。

计算过程：
1. 将 IP 地址`192.168.1.1`转换为二进制
```
11000000 10101000 00000001 00000001
```
1. 将子网掩码`255.255.252.0`转换成二进制
```
11111111.11111111.11111100.00000000
```
1. 将两者相“与"运算：
```
11000000 10101000 00000001 00000001

11111111.11111111.11111100.00000000
-----------------------------------
11000000 10101000 00000000 00000000
```
转换成网络号就是：`192.168.0.0`
4. 将 IP 地址`192.168.2.1`转换为二进制
```
11000000 10101000 00000010 00000001
```
5. 将子网掩码`255.255.252.0`转换成二进制
```
11111111.11111111.11111100.00000000
```
6. 将两者相“与"运算：
```
11000000 10101000 00000010 00000001

11111111.11111111.11111100.00000000
-----------------------------------
11000000 10101000 00000000 00000000
```
转换成网络号就是：`192.168.0.0`

很明显，二者的结果是一样的，都是属于`192.168.0.0`网段，所以他们是同属于一个网段。
# 如何根据IP地址推算子网掩码
大部分情况下，我们网络中只要不超过 254 台主机的的话，子网掩码都可以设置成`255.255.255.0`。超过了 254 台主机，可以划分 vlan，也可以设置成一个大网段。

设置成一个大网段就有一个难点，就是如何确定这个大网段里面的子网掩码。
## 示例
假设监控网络中有600个点位，我们现在也不想把它划分 vlan（实际项目中大部分是会划分 vlan 的），假设只想用一个大网段把这 600 个点位分配 IP 地址，如何设置 IP 地址，如何确实子网掩码？

首先我们知道 600 个点位，可以使用 3 个 254 个 IP 地址段来分配。
```
ip段一：192.168.0.1——192.168.0.254
ip段二：192.168.1.1——192.168.1.254
ip段三：192.168.2.1——192.168.2.254
```
每个网段有 254 个 IP 地址，完全够 600 个点位用的。

如果要使这三个 IP 段在同一个网段内，那么这个大网段共同的子网掩码是多少呢？

我们来分析下：
1. 将ip地址192.168.0.1转换为二进制
```
11000000 10101000 00000000 00000001
```
2. 将ip地址192.168.1.1转换为二进制
```
11000000 10101000 00000001 00000001
```
3. 将ip地址192.168.2.1转换为二进制
```
11000000 10101000 00000010 00000001
```
转换成了二进制，可以看得出，三个 IP 段的二进制前面 22 位的是不变的，那么可以将他们表示成：
```
ip段一：192.168.0.1/22
ip段二：192.168.1.1/22
ip段三：192.168.2.1/22
```
这种`192.168.2.x/22`形式的 IP 地址就已经告诉了子网掩码了。

也就是说他们共同的子网掩码二进制前面 22 个都是 1。
```
11111111 11111111 11111100 00000000
```
转换成十进制，那就是`255.255.252.0`，所以他们共同的子网掩码就是`255.255.252.0`。
