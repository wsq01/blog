---
title: MySQL运算符
date: 2020-04-19 14:59:13
tags: [MySQL]
categories: [MySQL]
---


在 MySQL 中，可以通过运算符来获取表结构以外的另一种数据。例如，学生表中存在一个 birth 字段，这个字段表示学生的出生年份。如果想得到这个学生的实际年龄，可以使用 MySQL 中的算术运算符用当前的年份减学生出生的年份，求出的结果就是这个学生的实际年龄了。

MySQL 所提供的运算符可以直接对表中数据或字段进行运算，进而实现用户的新需求，增强了 MySQL 的功能。

MySQL 支持 4 种运算符，分别是：
1. 算术运算符
执行算术运算，例如：加、减、乘、除等。
2. 比较运算符
包括大于、小于、等于或不等于、等等。主要用于数值的比较、字符串的匹配等方面。
3. 逻辑运算符
包括与、或、非和异或、等逻辑运算符。其返回值为布尔型，真值（1 或 true）和假值（0 或 false）。
4. 位运算符
包括按位与、按位或、按位取反、按位异或、按位左移和按位右移等位运算符。位运算必须先将数据转换为补码，然后在根据数据的补码进行操作。运算完成后，将得到的值转换为原来的类型（十进制数），返回给用户。

# 算术运算符
算术运算符是 SQL 中最基本的运算符，MySQL 支持的运算符包括加、减、乘、除和取余运算。

MySQL中的算术运算符：

| 运算符      | 作用               | 使用方法 |
| :--: | :--: | :--: |
| +           | 加法运算           | 用于获得一个或多个值的和 |
| -           | 减法运算	         | 用于从一个值中减去另一个值 |
| *           | 乘法运算	         | 使数字相乘，得到两个或多个值的乘积 |
| /           | 除法运算，返回商   | 用一个值除以另一个值得到商 |
| %，MOD      | 求余运算，返回余数 | 用一个值除以另一个值得到余数 |


创建表`temp`，定义数据类型为`INT`的字段`num，并插入值 64，对`num`值进行算术运算。
```sql
CREATE TABLE temp(num INT);

INSERT INTO temp VALUE (64);

mysql> SELECT num,num+10,num-3+5,num+36.5 FROM temp;
+------+--------+---------+----------+
| num  | num+10 | num-3+5 | num+36.5 |
+------+--------+---------+----------+
|   64 |     74 |      66 |    100.5 |
+------+--------+---------+----------+
1 row in set (0.01 sec)

mysql> SELECT num,num*2,num/2,num/3,num%3 FROM temp;
+------+-------+---------+---------+-------+
| num  | num*2 | num/2   | num/3   | num%3 |
+------+-------+---------+---------+-------+
|   64 |   128 | 32.0000 | 21.3333 |     1 |
+------+-------+---------+---------+-------+
1 row in set (0.00 sec)
```
由上面计算结果可以看出，对`num`进行除法运算时，由于 64 无法被 3 整除，因此 MySQL 对`num/3`求商的结果保存到了小数点后面四位，结果为 21.3333；64 除以 3 的余数为 1，因此取余运算`num%3`的结果为 1。

对于取余运算，还可以使用`MOD(a,b)`函数，`MOD(a,b)`相当于`a%b`：
```sql
mysql> SELECT MOD (num,3) FROM temp;
+-------------+
| MOD (num,3) |
+-------------+
|           1 |
+-------------+
1 row in set (0.00 sec)
```
数学运算中，除数为 0 的除法是没有意义的。所以在除法运算和取余运算中，如果除数为 0，那么返回结果为`NULL`。
```sql
mysql> SELECT num,num/0,num%0 FROM temp;
+------+-------+-------+
| num  | num/0 | num%0 |
+------+-------+-------+
|   64 |  NULL |  NULL |
+------+-------+-------+
1 row in set (0.00 sec)
```
# 逻辑运算符
逻辑运算符又称为布尔运算符，用来确定表达式的真和假。

MySQL 中的逻辑运算符：

运算符	作用
NOT 或者 !	逻辑非
AND 或者 &&	逻辑与
OR 和 ||	逻辑或
XOR	逻辑异或 

下面分别讨论 MySQL 逻辑运算符的使用方法。
逻辑非运算（NOT 或者 !）
NOT和!都是逻辑非运算符，返回和操作数相反的结果，具体语法规则为：
当操作数为 0（假）时，返回值为 1；
当操作数为非零值时，返回值为 0；
当操作数为 NULL 时，返回值为 NULL。
 
【实例1】分别使用非运算符 NOT 或者 ! 进行逻辑判断，运行结果如下：
```sql
mysql> SELECT NOT 10,NOT(1-1),NOT-5,NOT NULL,NOT 1+1;
+--------+----------+-------+----------+---------+
| NOT 10 | NOT(1-1) | NOT-5 | NOT NULL | NOT 1+1 |
+--------+----------+-------+----------+---------+
|      0 |        1 |     0 |     NULL |       0 |
+--------+----------+-------+----------+---------+
1 row in set (0.00 sec)

mysql> SELECT !10,!(1-1),!-5,!NULL,!1+1;
+-----+--------+-----+-------+------+
| !10 | !(1-1) | !-5 | !NULL | !1+1 |
+-----+--------+-----+-------+------+
|   0 |      1 |   0 |  NULL |    1 |
+-----+--------+-----+-------+------+
1 row in set (0.00 sec)

mysql> SELECT !1+1;
+------+
| !1+1 |
+------+
|    1 |
+------+
1 row in set (0.00 sec)
```
由运行结果可以看出，NOT 1+1和! 1+1的返回值不同，这是因为 NOT 与 ! 的优先级不同：
NOT 的优先级低于 +，因此NOT 1+1相当于NOT(1+1)，先计算1+1，然后再进行 NOT 运算，由于操作数不为 0，因此NOT 1+1的结果是 0；
相反，! 的优先级别要高于 +，因此! 1+1相当于(!1)+1，先计算!1结果为 0，再加 1，最后结果为 1。

读者在使用运算符运算时，一定要注意运算符的优先级，如果不能确定计算顺序，最好使用括号，以保证运算结果的正确。
逻辑与运算符（AND 或者 &&）
AND 和 && 都是逻辑与运算符，具体语法规则为：
当所有操作数都为非零值并且不为 NULL 时，返回值为 1；
当一个或多个操作数为 0 时，返回值为 0；
操作数中有任何一个为 NULL 时，返回值为 NULL。

【实例2】分别使用与运算符 AND 和 && 进行逻辑判断，运行结果如下:
```
mysql> SELECT 1 AND -1,1 AND 0,1 AND NULL, 0 AND NULL;
+----------+---------+------------+------------+
| 1 AND -1 | 1 AND 0 | 1 AND NULL | 0 AND NULL |
+----------+---------+------------+------------+
|        1 |       0 |       NULL |          0 |
+----------+---------+------------+------------+
1 row in set (0.00 sec)

mysql> SELECT 1 && -1,1&&0,1&&NULL,0&&NULL;
+---------+------+---------+---------+
| 1 && -1 | 1&&0 | 1&&NULL | 0&&NULL |
+---------+------+---------+---------+
|       1 |    0 |    NULL |       0 |
+---------+------+---------+---------+
1 row in set (0.00 sec)
```
由结果可以看到，AND 和 && 的作用相同。1 AND-1中没有 0 或者 NULL，所以返回值为 1；1 AND 0中有操作数 0，所以返回值为 0；1 AND NULL虽然有 NULL，所以返回值为 NULL。
 
注意：AND 运算符可以有多个操作数，但要注意多个操作数运算时，AND 两边一定要使用空格隔开，不然会影响结果的正确性。
逻辑或运算符（OR 或者 ||）
OR 和 || 都是逻辑或运算符，具体语法规则为：
当两个操作数都为非 NULL 值时，如果有任意一个操作数为非零值，则返回值为 1，否则结果为 0；
当有一个操作数为 NULL 时，如果另一个操作数为非零值，则返回值为 1，否则结果为NULL；
假如两个操作数均为 NULL 时，则返回值为 NULL。

【实例3】分别使用或运算符 OR 和 || 进行逻辑判断，运行结果如下：
```
mysql> SELECT 1 OR -1 OR 0,1 OR 2,1 OR NULL, 0 OR NULL, NULL OR NULL;
+--------------+--------+-----------+-----------+--------------+
| 1 OR -1 OR 0 | 1 OR 2 | 1 OR NULL | 0 OR NULL | NULL OR NULL |
+--------------+--------+-----------+-----------+--------------+
|            1 |      1 |         1 |      NULL |         NULL |
+--------------+--------+-----------+-----------+--------------+
1 row in set (0.00 sec)

mysql> SELECT 1 || -1 || 0,1||2,1||NULL,0||NULL,NULL||NULL;
+--------------+------+---------+---------+------------+
| 1 || -1 || 0 | 1||2 | 1||NULL | 0||NULL | NULL||NULL |
+--------------+------+---------+---------+------------+
|            1 |    1 |       1 |    NULL |       NULL |
+--------------+------+---------+---------+------------+
1 row in set (0.00 sec)
```
由结果可以看到，OR 和 || 的作用相同。下面是对各个结果的解析：
1 OR -1 OR 0含有 0，但同时包含有非 0 的值 1 和 -1，所以返回结果为 1；
1 OR 2中没有操作数 0，所以返回结果为 1；
1 OR NULL虽然有 NULL，但是有操作数 1，所以返回结果为 1；
0 OR NULL中没有非 0 值，并且有 NULL，所以返回值为 NULL；
NULL OR NULL中只有NULL，所以返回值为NULL。
异或运算（XOR 运算符）
XOR 表示逻辑异或，具体语法规则为：
当任意一个操作数为 NULL 时，返回值为 NULL；
对于非 NULL 的操作数，如果两个操作数都是非 0 值或者都是 0 值，则返回值为 0；
如果一个为0值，另一个为非 0 值，返回值为 1。

【实例4】使用异或运算符 XOR 进行逻辑判断，SQL语句如下：
```
mysql> SELECT 1 XOR 1,0 XOR 0,1 XOR 0,1 XOR NULL,1 XOR 1 XOR 1;
+---------+---------+---------+------------+---------------+
| 1 XOR 1 | 0 XOR 0 | 1 XOR 0 | 1 XOR NULL | 1 XOR 1 XOR 1 |
+---------+---------+---------+------------+---------------+
|       0 |       0 |       1 |       NULL |             1 |
+---------+---------+---------+------------+---------------+
1 row in set (0.00 sec)
```
由结果可以看到：
1 XOR 1和0 XOR 0中运算符两边的操作数都为非零值，或者都是零值，因此返回 0；
1 XOR 0中两边的操作数，一个为 0 值，另一个为非 0 值，所以返回值为 1；
1 XOR NULL中有一个操作数为 NULL，所以返回值为 NULL；
1 XOR 1 XOR 1中有多个操作数，运算符相同，因此运算顺序从左到右依次计算，1 XOR 1的结果为 0，再与 1 进行异或运算，所以返回值为 1。
提示：a XOR b 的计算等同于 (a AND (NOT b))或者 ((NOT a) AND b)。
# 比较运算符
当使用 SELECT 语句进行查询时，MySQL 允许用户对表达式的左边操作数和右边操作数进行比较，比较结果为真，则返回 1，为假则返回 0，比较结果不确定则返回 NULL。MySQL 支持的比较运算符如下表所示。

MySQL 中的比较运算符
运算符	作用
=	等于
<=>	安全的等于
<> 或者 !=	不等于
<=	小于等于
>=	大于等于
> 	大于
IS NULL 或者 ISNULL	判断一个值是否为空
IS NOT NULL	判断一个值是否不为空
BETWEEN AND	判断一个值是否落在两个值之间
比较运算符可以用于比较数字、字符串和表达式的值。注意，字符串的比较是不区分大小写的。
1) 等于运算（=）
= 运算符用来比较两边的操作数是否相等，相等的话返回 1，不相等的话返回 0。具体的语法规则如下：
若有一个或两个操作数为 NULL，则比较运算的结果为 NULL。
若两个操作数都是字符串，则按照字符串进行比较。
若两个操作数均为整数，则按照整数进行比较。
若一个操作数为字符串，另一个操作数为数字，则 MySQL 可以自动将字符串转换为数字。

注意：NULL 不能用于 = 比较。

【实例1】使用 = 进行相等判断，SQL 语句如下：
```
mysql> SELECT 1=0,'2'=2,2=2,'0.02'=0,'b'='b',(1+3)=(2+2),NULL=null;
+-----+-------+-----+----------+---------+-------------+-----------+
| 1=0 | '2'=2 | 2=2 | '0.02'=0 | 'b'='b' | (1+3)=(2+2) | NULL=null |
+-----+-------+-----+----------+---------+-------------+-----------+
|   0 |     1 |   1 |        0 |       1 |           1 |      NULL |
+-----+-------+-----+----------+---------+-------------+-----------+
1 row in set (0.01 sec)
```
对运行结果的分析：
2=2和'2' =2的返回值相同，都为 1，因为在进行判断时，MySQL 自动进行了转换，把字符 '2' 转换成了数字 2。
'b'='b'为相同的字符比较，因此返回值为 1。
表达式1+3和表达式2+2的结果都为 4，因此结果相等，返回值为 1；
由于 = 不能用于空值 NULL 的判断，因此NULL=null的返回值为 NULL。
2) 安全等于运算符（<=>）
<=> 操作符和 = 操作符类似，不过 <=> 可以用来判断 NULL 值，具体语法规则为：
当两个操作数均为 NULL 时，其返回值为 1 而不为 NULL；
而当一个操作数为 NULL 时，其返回值为 0 而不为 NULL。

【实例2】使用 <=> 进行相等的判断，SQL 语句如下：
```
mysql> SELECT 1<=>0,'2'<=>2,2<=>2,'0.02'<=>0,'b'<=>'b',(1+3) <=> (2+1),NULL<=>NULL;
+-------+---------+-------+------------+-----------+-----------------+-------------+
| 1<=>0 | '2'<=>2 | 2<=>2 | '0.02'<=>0 | 'b'<=>'b' | (1+3) <=> (2+1) | NULL<=>NULL |
+-------+---------+-------+------------+-----------+-----------------+-------------+
|     0 |       1 |     1 |          0 |         1 |               0 |           1 |
+-------+---------+-------+------------+-----------+-----------------+-------------+
1 row in set (0.00 sec)
```
由结果可以看到，<=> 在执行比较操作时和 = 的作用是相似的，唯一的区别是 <=> 可以用来对 NULL 进行判断，两者都为 NULL 时返回值为 1。
3) 不等于运算符（<> 或者 !=）
与 = 的作用相反，<> 和 != 用于判断数字、字符串、表达式是否不相等。对于 <> 和 !=，如果两侧操作数不相等，返回值为 1，否则返回值为 0；如果两侧操作数有一个是 NULL，那么返回值也是 NULL。

【实例3】使用 <> 和 != 进行不相等的判断，SQL 语句如下：
```
mysql> SELECT 'good'<>'god',1<>2,4!=4,5.5!=5,(1+3)!=(2+1),NULL<>NULL;
+---------------+------+------+--------+--------------+------------+
| 'good'<>'god' | 1<>2 | 4!=4 | 5.5!=5 | (1+3)!=(2+1) | NULL<>NULL |
+---------------+------+------+--------+--------------+------------+
|             1 |    1 |    0 |      1 |            1 |       NULL |
+---------------+------+------+--------+--------------+------------+
1 row in set (0.00 sec)
```
由结果可以看到，两个不等于运算符作用相同，都可以进行数字、字符串、表达式的比较判断。
4) 小于等于运算符（<=）
<= 是小于等于运算符，用来判断左边的操作数是否小于或者等于右边的操作数；如果小于或者等于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是 NULL，那么返回值也是 NULL。

【实例4】使用 <= 进行比较判断，SQL 语句如下:
```
mysql> SELECT 'good'<='god',1<=2,4<=4,5.5<=5,(1+3)<=(2+1),NULL<=NULL;
+---------------+------+------+--------+--------------+------------+
| 'good'<='god' | 1<=2 | 4<=4 | 5.5<=5 | (1+3)<=(2+1) | NULL<=NULL |
+---------------+------+------+--------+--------------+------------+
|             0 |    1 |    1 |      0 |            0 |       NULL |
+---------------+------+------+--------+--------------+------------+
1 row in set (0.00 sec)
```
由结果可以看到：
左边操作数小于或者等于右边时，返回值为 1，例如 4<=4；
当左边操作数大于右边时，返回值为 0，例如“good”第 3 个位置的“o”字符在字母表中的顺序大于“god”中的第 3 个位置的“d”字符，因此返回值为0；
同样，比较 NULL 值时返回 NULL。
5) 小于运算符（<）
< 是小于运算符，用来判断左边的操作数是否小于右边的操作数；如果小于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是 NULL，那么返回值也是 NULL。

【实例5】使用 < 进行比较判断，SQL 语句如下：
```
mysql> SELECT 'good'<'god'，1<2，4<4，5.5<5，(1+3)<(2+1)，NULL<NULL；
+--------------+-----+-----+-------+-------------+-----------+
| 'good'<'god' | 1<2 | 4<4 | 5.5<5 | (1+3)<(2+1) | NULL<NULL |
+--------------+-----+-----+-------+-------------+-----------+
|            0 |   1 |   0 |     0 |           0 |      NULL |
+--------------+-----+-----+-------+-------------+-----------+
1 row in set (0.02 sec)
```
由结果可以看到：
当左边操作数小于右边时，返回值为 1，例如 1<2；
当左边操作数大于右边时，返回值为 0，例如“good”第 3 个位置的“o”字符在字母表中的顺序大于“god”中的第 3 个位置的“d”字符，因此返回值为 0；
同样，比较 NULL 值时返回 NULL。
6) 大于等于运算符（>=）
>= 是大于等于运算符，用来判断左边的操作数是否大于或者等于右边的操作数；如果大于或者等于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是 NULL，那么返回值也是 NULL。

【实例6】使用 >= 进行比较判断，SQL 语句如下：
```
mysql> SELECT 'good'>='god'，1>=2，4>=4，5.5>=5，(1+3)>=(2+1)，NULL>=NULL；
+---------------+------+------+--------+--------------+------------+
| 'good'>='god' | 1>=2 | 4>=4 | 5.5>=5 | (1+3)>=(2+1) | NULL>=NULL |
+---------------+------+------+--------+--------------+------------+
|             1 |    0 |    1 |      1 |            1 |       NULL |
+---------------+------+------+--------+--------------+------------+
1 row in set (0.00 sec)
```
由结果可以看到：
左边操作数大于或者等于右边时，返回值为 1，例如 4>=4；
当左边操作数小于右边时，返回值为 0，例如 1>=2；
同样，比较 NULL 值时返回 NULL。
7) 大于运算符（>）
> 是大于运算符，用来判断左边的操作数是否大于右边的操作数；如果大于，返回值为 1，否则返回值为 0；如果两侧操作数有一个是 NULL，那么返回值也是 NULL。

【实例7】使用 > 进行比较判断，SQL 语句如下：
```
mysql> SELECT 'good'>'god'，1>2，4>4，5.5>5，(1+3)>(2+1)，NULL>NULL；
+--------------+-----+-----+-------+-------------+-----------+
| 'good'>'god' | 1>2 | 4>4 | 5.5>5 | (1+3)>(2+1) | NULL>NULL |
+--------------+-----+-----+-------+-------------+-----------+
|            1 |   0 |   0 |     1 |           1 |      NULL |
+--------------+-----+-----+-------+-------------+-----------+
1 row in set (0.00 sec)
```
由结果可以看到：
左边操作数大于右边时，返回值为 1，例如 5.5>5；
当左边操作数小于右边时，返回 0，例如 1>2；
同样，比较 NULL 值时返回 NULL。
8) IS NULL(ISNULL) 和 IS NOT NULL 运算符
IS NULL 或 ISNULL 运算符用来检测一个值是否为 NULL，如果为 NULL，返回值为 1，否则返回值为 0。ISNULL 可以认为是 IS NULL 的简写，去掉了一个空格而已，两者的作用和用法都是完全相同的。

IS NOT NULL 运算符用来检测一个值是否为非 NULL，如果是非 NULL，返回值为 1，否则返回值为 0。

【实例8】使用 IS NULL、ISNULL 和 IS NOT NULL 判断 NULL 值和非 NULL 值，SQL 语句如下：
```
mysql> SELECT NULL IS NULL，ISNULL(NULL)，ISNULL(10)，10 IS NOT NULL;
+--------------+--------------+------------+----------------+
| NULL IS NULL | ISNULL(NULL) | ISNULL(10) | 10 IS NOT NULL |
+--------------+--------------+------------+----------------+
|            1 |            1 |          0 |              1 |
+--------------+--------------+------------+----------------+
1 row in set (0.01 sec)
```
由结果可以看到，IS NULL 和 ISNULL 的作用相同，只是写法略有不同。ISNULL 和 IS NOT NULL 的返回值正好相反。
9) BETWEEN AND 运算符
BETWEEN AND 运算符用来判断表达式的值是否位于两个数之间，或者说是否位于某个范围内，它的语法格式如下：
expr BETWEEN min AND max

expr 表示要判断的表达式，min 表示最小值，max 表示最大值。如果 expr 大于等于 min 并且小于等于 max，那么返回值为 1，否则返回值为 0。

【实例9】使用 BETWEEN AND 进行值区间判断，输入 SQL 语句如下：
```
mysql> SELECT 4 BETWEEN 2 AND 5,4 BETWEEN 4 AND 6,12 BETWEEN 9 AND 10;
+-------------------+-------------------+---------------------+
| 4 BETWEEN 2 AND 5 | 4 BETWEEN 4 AND 6 | 12 BETWEEN 9 AND 10 |
+-------------------+-------------------+---------------------+
|                 1 |                 1 |                   0 |
+-------------------+-------------------+---------------------+
1 row in set (0.00 sec)
```
由结果可以看到：
4 在端点值区间内或者等于其中一个端点值，BETWEEN AND 表达式返回值为 1；
12 并不在指定区间内，因此返回值为 0；
对于字符串类型的比较，按字母表中字母顺序进行比较，“x”不在指定的字母区间内，因此返回值为 0，而“b”位于指定字母区间内，因此返回值为 1。
总结
使用比较运算符时需要注意空值 NULL，大部分比较运算符遇到 NULL 时也会返回 NULL，上面我们都进行了说明。
# 位运算符
所谓位运算，就是按照内存中的比特位（Bit）进行操作，这是计算机能够支持的最小单位的运算。程序中所有的数据在内存中都是以二进制形式存储的，位运算就是对这些二进制数据进行操作。

位运算一般用于操作整数，对整数进行位运算才有实际的意义。整数在内存中是以补码形式存储的，正数的补码形式和原码形式相同，而负数的补码形式和它的原码形式是不一样的，这一点大家要特别注意；这意味着，对负数进行位运算时，操作的是它的补码，而不是它的原码。
对整数存储不了解的读者请猛击《整数在内存中是如何存储的，为什么它堪称天才般的设计》。

MySQL 中的整数字面量（常量整数，也就是直接书写出来的整数）默认以 8 个字节（Byte）来表示，也就是 64 位（Bit）。例如，5 的二进制形式为：
0000 0000 ... 0000 0101

省略号部分都是 0，101 前面总共有 61 个 0。

注意：为了方便大家阅读，本节在介绍正数的补码时，省略了前面的 0。
 
MySQL 支持 6 种位运算符，如下表所示。
MySQL 中的位运算符
运算符	说明	使用形式	举例
|	位或	a | b	5 | 8
&	位与	a & b	5 & 8
^	位异或	a ^ b	5 ^ 8
~	位取反	~a	~5
<< 	位左移	a << b	5 << 2，表示整数 5 按位左移 2 位
>> 	位右移	a >> b	5 >> 2，表示整数 5 按位右移 2 位
位运算中的&、|、~和逻辑运算中的&&、||、!非常相似。
位或运算符 |
参与|运算的两个二进制位有一个为 1 时，结果就为 1，两个都为 0 时结果才为 0。例如1|1结果为 1，0|0结果为0，1|0结果为1，这和逻辑运算中的||非常类似。
例 1
使用位或运算符进行正数运算，SQL 语句如下：
```
mysql> SELECT 10|15,9|4|2;
+-------+-------+
| 10|15 | 9|4|2 |
+-------+-------+
|    15 |    15 |
+-------+-------+
1 row in set (0.00 sec)
```
10 的补码为 1010，15 的补码为 1111，按位或运算之后，结果为 1111，即整数 15；9 的补码为 1001，4 的补码为 0100，2 的补码为 0010，按位或运算之后，结果为 111，即整数 15。
例 2 
使用位或运算符进行负数运算，SQL 语句如下：
```
mysql> SELECT -7|-1;
+----------------------+
| -7|-1                |
+----------------------+
| 18446744073709551615 |
+----------------------+
1 row in set (0.00 sec)
```
-7 的补码为 60 个‘1’加 1001，-1 的补码为 64 个‘1’，按位或运算之后，结果为 64 个‘1’，即整数 18446744073709551615。
 
可以发现，任何数和 -1 进行位或运算时，最终结果都是 -1 的十进制数。
位与运算符 &
参与&运算的两个二进制位都为 1 时，结果就为 1，否则为 0。例如1|1结果为 1，0|0结果为 0，1|0结果为 0，这和逻辑运算中的&&非常类似。
例 3
使用位与运算符进行正数运算，SQL 语句如下：
```
mysql> SELECT 10 & 15,9 & 4 & 2;
+---------+-----------+
| 10 & 15 | 9 & 4 & 2 |
+---------+-----------+
|      10 |         0 |
+---------+-----------+
1 row in set (0.00 sec) 
```
10 的补码为 1010，15 的补码为 1111，按位与运算之后，结果为 1010，即整数 10；9 的补码为 1001，4 的补码为 0100，2 的补码为 0010，按位与运算之后，结果为 0000，即整数 0。
例 4 
使用位与运算符进行负数运算，SQL 语句如下：
```
mysql> SELECT -7&-1;
+----------------------+
| -7&-1                |
+----------------------+
| 18446744073709551609 |
+----------------------+
1 row in set (0.01 sec)
```
-7 的补码为 60 个‘1’加 1001，-1 的补码为 64 个‘1’，按位与运算之后，结果为 60 个‘1’加 1001，即整数 18446744073709551609。

可以发现，任何数和 -1 进行位与运算时，最终结果都为任何数本身的十进制数。
位异或运算符 ^
参与^运算的两个二进制位不同时，结果为 1，相同时，结果为 0。例如1|1结果为 0，0|0结果为 0，1|0结果为1。
例 5
使用位异或运算符进行正数运算，SQL 语句如下：
```
mysql> SELECT 10^15,1^0,1^1;
+-------+-----+-----+
| 10^15 | 1^0 | 1^1 |
+-------+-----+-----+
|     5 |   1 |   0 |
+-------+-----+-----+
1 row in set (0.00 sec) 
```
10 的补码为 1010，15 的补码为 111，按位异或运算之后，结果为 0101，即整数 5；1 的补码为 0001，0 的补码为 0000，按位异或运算之后，结果为 0001；1 和 1 本身二进制位完全相同，因此结果为 0。
例 6 
使用位异或运算符进行负数运算，SQL 语句如下：
```
mysql> SELECT -7^-1;
+-------+
| -7^-1 |
+-------+
|     6 |
+-------+
1 row in set (0.00 sec) 
```
-7 的补码为 60 个‘1’加 1001，-1 的补码为 64 个‘1’，按位异或运算之后，结果为 110，即整数 6。
位左移运算符 << 
位左移是按指定值的补码形式进行左移，左移指定位数之后，左边高位的数值被移出并丢弃，右边低位空出的位置用 0 补齐。

位左移的语法格式为：
expr << n

其中，n 指定值 expr 要移位的位数，n 必须为非负数。
例 7
使用位左移运算符进行正数计算，SQL 语句如下：
```
mysql> SELECT 1<<2,4<<2;
+------+------+
| 1<<2 | 4<<2 |
+------+------+
|    4 |   16 |
+------+------+
1 row in set (0.00 sec) 
```
1 的补码为 0000 0001，左移两位之后变成 0000 0100，即整数 4；4 的补码为 0000 0100，左移两位之后变成 0001 0000，即整数 16。
例 8
使用位左移运算符进行负数计算，SQL 语句如下：
```
mysql> SELECT -7<<2;
+----------------------+
| -7<<2                |
+----------------------+
| 18446744073709551588 |
+----------------------+
1 row in set (0.00 sec)
```
-7 的补码为 60 个‘1’加 1001，左移两位之后变成 56 个‘1’加 1110 0100，即整数 18446744073709551588。
位右移运算符 >>
位右移是按指定值的补码形式进行右移，右移指定位数之后，右边低位的数值被移出并丢弃，左边高位空出的位置用 0 补齐。
 
位右移语法格式为：
expr >> n

其中，n 指定值 expr 要移位的位数，n 必须为非负数。 
例 9
使用位右移运算符进行正数运算，SQL 语句如下：
```
mysql> SELECT 1>>1,16>>2;
+------+-------+
| 1>>1 | 16>>2 |
+------+-------+
|    0 |     4 |
+------+-------+
1 row in set (0.00 sec)
```
1 的补码为 0000 0001，右移 1 位之后变成 0000 0000，即整数 0；16 的补码为 0001 0000，右移两位之后变成 0000 0100，即整数 4。
例 10
使用位右移运算符进行负数运算，SQL 语句如下：
```
mysql> SELECT -7>>2;
+---------------------+
| -7>>2               |
+---------------------+
| 4611686018427387902 |
+---------------------+
1 row in set (0.00 sec)
```
-7 的补码为 60 个‘1’加 1001，右移两位之后变成 0011 加 56 个‘1’加 1110，即整数 4611686018427387902。
位取反运算符 ~ 
位取反是将参与运算的数据按对应的补码进行反转，也就是做 NOT 操作，即 1 取反后变 0，0 取反后变为 1。
例 11
下面看一个经典的取反例子，对 1 进行位取反运算，具体如下所示：
```
mysql> SELECT ~1,~18446744073709551614;
+----------------------+-----------------------+
| ~1                   | ~18446744073709551614 |
+----------------------+-----------------------+
| 18446744073709551614 |                     1 |
+----------------------+-----------------------+
1 row in set (0.00 sec)
```
常量 1 的补码为 63 个‘0‘加 1 个’1‘，位取反后就是 63 个’1‘加一个’0‘，转换为二进制后就是 18446744073709551614。
 
可以使用 BIN() 函数查看 1 取反之后的结果，BIN() 函数的作用是将一个十进制数转换为二进制数，SQL 语句如下:
```
mysql> SELECT BIN(~1);
+------------------------------------------------------------------+
| BIN(~1)                                                          |
+------------------------------------------------------------------+
| 1111111111111111111111111111111111111111111111111111111111111110 |
+------------------------------------------------------------------+
1 row in set (0.01 sec)
```
1 的补码表示为最右边位为 1，其他位均为 0，取反操作之后，除了最低位，其他位均变为 1。
例 12
使用位取反运算符进行运算，SQL 语句如下：
```
mysql> SELECT 5 & ~1;
+--------+
| 5 & ~1 |
+--------+
|      4 |
+--------+
1 row in set (0.00 sec) 
```
逻辑运算5&~1 中，由于位取反运算符‘~’的级别高于位与运算符‘&’，因此先对 1 进行取反操作，结果为 63 个‘1’加一个‘0’，然后再与整数 5 进行与运算，结果为 0100，即整数 4。
# 运算符的优先级
运算符的优先级决定了不同的运算符在表达式中计算的先后顺序，下表列出了 MySQL 中的各类运算符及其优先级。

优先级由低到高排列	运算符
1	=(赋值运算）、:=
2	II、OR
3	XOR
4	&&、AND
5	NOT
6	BETWEEN、CASE、WHEN、THEN、ELSE
7	=(比较运算）、<=>、>=、>、<=、<、<>、!=、 IS、LIKE、REGEXP、IN
8	|
9	&
10	<<、>>
11	-(减号）、+
12	*、/、%
13	^
14	-(负号）、〜（位反转）
15	!
可以看出，不同运算符的优先级是不同的。一般情况下，级别高的运算符优先进行计算，如果级别相同，MySQL 按表达式的顺序从左到右依次计算。

另外，在无法确定优先级的情况下，可以使用圆括号“()”来改变优先级，并且这样会使计算过程更加清晰。
# IN和NOT IN用法
MySQL 中的 IN 运算符用来判断表达式的值是否位于给出的列表中；如果是，返回值为 1，否则返回值为 0。

NOT IN 的作用和 IN 恰好相反，NOT IN 用来判断表达式的值是否不存在于给出的列表中；如果不是，返回值为 1，否则返回值为 0。

IN 和 NOT IN 的语法格式如下：
```
expr IN ( value1, value2, value3 ... valueN )
expr NOT IN ( value1, value2, value3 ... valueN )
```
expr 表示要判断的表达式，value1, value2, value3 ... valueN 表示列表中的值。MySQL 会将 expr 的值和列表中的值逐一对比。

【实例1】在 SQL 语句中使用 IN 和 NOT IN 运算符：
```
mysql> SELECT 2 IN (1,3,5,'thks'),'thks' IN (1,3,5, 'thks');
+---------------------+---------------------------+
| 2 IN (1,3,5,'thks') | 'thks' IN (1,3,5, 'thks') |
+---------------------+---------------------------+
|                   0 |                         1 |
+---------------------+---------------------------+
1 row in set, 2 warnings (0.00 sec)

mysql> SELECT 2 NOT IN (1,3,5,'thks'),'thks' NOT IN (1,3,5, 'thks');
+-------------------------+-------------------------------+
| 2 NOT IN (1,3,5,'thks') | 'thks' NOT IN (1,3,5, 'thks') |
+-------------------------+-------------------------------+
|                       1 |                             0 |
+-------------------------+-------------------------------+
1 row in set, 2 warnings (0.00 sec)
```
由结果可以看到，IN 和 NOT IN 的返回值正好相反。
对空值 NULL 的处理
当 IN 运算符的两侧有一个为空值 NULL 时，如果找不到匹配项，则返回值为 NULL；如果找到了匹配项，则返回值为 1。

请看下面的 SQL 语句如下：
```
mysql> SELECT NULL IN (1,3,5,'thks'),10 IN (1,3,NULL,'thks');
+------------------------+-------------------------+
| NULL IN (1,3,5,'thks') | 10 IN (1,3,NULL,'thks') |
+------------------------+-------------------------+
|                   NULL |                    NULL |
+------------------------+-------------------------+
1 row in set, 1 warning (0.00 sec)

mysql>  SELECT NULL IN (1,3,5,'thks'),10 IN (1,10,NULL,'thks');
+------------------------+--------------------------+
| NULL IN (1,3,5,'thks') | 10 IN (1,10,NULL,'thks') |
+------------------------+--------------------------+
|                   NULL |                        1 |
+------------------------+--------------------------+
1 row in set (0.00 sec)
```
NOT IN 恰好相反，当 NOT IN 运算符的两侧有一个为空值 NULL 时，如果找不到匹配项，则返回值为 NULL；如果找到了匹配项，则返回值为 0。

请看下面的 SQL 语句如下：
```sql
mysql>  SELECT NULL NOT IN (1,3,5,'thks'),10 NOT IN (1,0,NULL,'thks');
+----------------------------+-----------------------------+
| NULL NOT IN (1,3,5,'thks') | 10 NOT IN (1,0,NULL,'thks') |
+----------------------------+-----------------------------+
|                       NULL |                        NULL |
+----------------------------+-----------------------------+
1 row in set, 1 warning (0.00 sec)

mysql>  SELECT NULL NOT IN (1,3,5,'thks'),10 NOT IN (1,10,NULL,'thks');
+----------------------------+------------------------------+
| NULL NOT IN (1,3,5,'thks') | 10 NOT IN (1,10,NULL,'thks') |
+----------------------------+------------------------------+
|                       NULL |                            0 |
+----------------------------+------------------------------+
1 row in set (0.00 sec)
```