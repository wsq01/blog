

# 函数简介
MySQL 函数是 MySQL 数据库提供的内部函数，这些内部函数可以帮助用户更加方便地处理表中的数据。函数就像预定的公式一样存放在数据库里，每个用户都可以调用已经存在的函数来完成某些功能。

提示：函数就是输入值然后得到相应的输出结果，输入值称为参数（parameter），输出值称为返回值。

函数可以很方便的地实现业务逻辑的重用，并且 MySQL 数据库允许用户自己创建函数，以适应实际的业务操作。正确使用函数会让读者在编写 SQL 语句时起到事半功倍的效果。

MySQL 函数用来对数据表中的数据进行相应的处理，以便得到用户希望得到的数据，使 MySQL 数据库的功能更加强大。

下面将简单介绍 MySQL 中包含的几类函数，以及这几类函数的使用范围和作用。

MySQL 函数包括数学函数、字符串函数、日期和时间函数、条件判断函数、系统信息函数和加密函数等。这些函数不仅能帮助用户做很多事情，比如字符串的处理、数值的运算、日期的运算等，还可以帮助开发人员编写出简单快捷的 SQL 语句。

SELECT、INSERT、UPDATE 和 DELETE 语句及其子句（例如 WHERE、ORDER BY、HAVING 等）中都可以使用 MySQL 函数。例如，数据表中的某个数据是负数，现在需要将这个数据显示为整数，这时就可以在 SELECT 语句中使用绝对值函数。

下面介绍这几类函数的使用范围。
数学函数主要用于处理数字。这类函数包括绝对值函数、正弦函数、余弦函数和获得随机数的函数等。
字符串函数主要用于处理字符串。其中包括字符串连接函数、字符串比较函数、将字符串的字母都变成小写或大写字母的函数和获取子串的函数等。
日期和时间函数主要用于处理日期和时间。其中包括获取当前时间的函数、获取当前日期的函数、返回年份的函数和返回日期的函数等。
条件判断函数主要用于在 SQL 语句中控制条件选择。其中包括 IF 语句、CASE 语句和 WHERE 语句等。
系统信息函数主要用于获取 MySQL 数据库的系统信息。其中包括获取数据库名的函数、获取当前用户的函数和获取数据库版本的函数等。
加密函数主要用于对字符串进行加密解密。其中包括字符串加密函数和字符串解密函数等。
其他函数主要包括格式化函数和锁函数等。
# 数值型函数
## ABS函数：求绝对值
在 MySQL 中绝对值函数 ABS(x) 返回 x 的绝对值。正数的绝对值是其本身，负数的绝对值为其相反数，0 的绝对值是 0。

【实例】求 5、-2.4、-24 和 0 的绝对值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT ABS(5),ABS(-2.4),ABS(-24),ABS(0);
+--------+-----------+----------+--------+
| ABS(5) | ABS(-2.4) | ABS(-24) | ABS(0) |
+--------+-----------+----------+--------+
|      5 |       2.4 |       24 |      0 |
+--------+-----------+----------+--------+
1 row in set (0.10 sec)
由运行结果可知，5 的绝对值为 5，-2.4 的绝对值为 2.4，-24 的绝对值为 24，0 的绝对值是 0。
## SQRT函数：求二次方根
在 MySQL 中平方根函数 SQRT(x) 返回非负数 x 的二次方根。负数没有平方根，返回结果为 NULL。

【实例 1】求 25、120 和 -9 的二次平方根，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT SQRT(25),SQRT(120),SQRT(-9);
+----------+--------------------+----------+
| SQRT(25) | SQRT(120)          | SQRT(-9) |
+----------+--------------------+----------+
|        5 | 10.954451150103322 |     NULL |
+----------+--------------------+----------+
1 row in set (0.06 sec)
由运行结果可知，5 的平方等于 25，因此 25 的平方根为 5；120 的平方根为 10.954451150103322；而负数没有平方根，因此 -9 返回的结果为 NULL。

也可以使用 SQRT 函数，计算出记录的平方根。

【实例 2】 假设数据表 tb_people 有以下这些数据：
mysql> SELECT * FROM tb_people;
+------+------+------------+--------------------+
| id   | name | work_date  | daily_typing_pages |
+------+------+------------+--------------------+
|  1   | John | 2007-01-24 |        250         |
|  2   | Ram  | 2007-05-27 |        220         |
|  3   | Jack | 2007-05-06 |        170         |
|  3   | Jack | 2007-04-06 |        100         |
|  4   | Jill | 2007-04-06 |        220         |
|  5   | Zara | 2007-06-06 |        300         |
|  5   | Zara | 2007-02-06 |        350         |
+------+------+------------+--------------------+
7 rows in set (0.00 sec)
根据上面的表格，要计算所有的 dialy_typing_pages 的平方根，输入 SQL 语句执行结果如下：
```
mysql> SELECT name, SQRT(daily_typing_pages)
  -> FROM tb_people;
+------+--------------------------+
| name | SQRT(daily_typing_pages) |
+------+--------------------------+
| John |        15.811388         |
| Ram  |        14.832397         |
| Jack |        13.038405         |
| Jack |        10.000000         |
| Jill |        14.832397         |
| Zara |        17.320508         |
| Zara |        18.708287         |
+------+--------------------------+
7 rows in set (0.00 sec)
```
## MOD函数：求余数
在 MySQL 中求余函数 MOD(x,y) 返回 x 被 y 除后的余数，MOD() 对于带有小数部分的数值也起作用，它返回除法运算后的余数。

【实例】对 MOD(63,8)、MOD(120,10)、MOD(15.5,3) 进行求余运算，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT MOD(63,8),MOD(120,10),MOD(15.5,3);
+-----------+-------------+-------------+
| MOD(63,8) | MOD(120,10) | MOD(15.5,3) |
+-----------+-------------+-------------+
|         7 |           0 |         0.5 |
+-----------+-------------+-------------+
1 row in set (0.03 sec)
由运行结果可知，63 除以 8 余数是 7，120 除以 10 余数是 0，15.5 除以 3 余数是 0.5
## CEIL和CELING函数：向上取整
在 MySQL 中取整函数 CEIL(x) 和 CEILING(x) 的意义相同，返回不小于 x 的最小整数值，返回值转化为一个 BIGINT。

【实例】使用 CEILING 函数返回最小整数，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT CEIL(-2.5),CEILING(2.5);
+------------+--------------+
| CEIL(-2.5) | CEILING(2.5) |
+------------+--------------+
|         -2 |            3 |
+------------+--------------+
1 row in set (0.00 sec)
由执行结果可知，-2.5 为负数，不小于 -2.5 的最小整数为 -2，因此返回值为 -2；不小于 2.5 的最小整数为 3，因此返回值为 3。
## FLOOR函数：向下取整
MySQL FLOOR(x) 函数返回小于 x 的最大整数值。

【实例】求 小于 5，5.66，-4，-4.66 的最大整数
mysql> SELECT FLOOR(5),FLOOR(5.66),FLOOR(-4),FLOOR(-4.66);
+----------+-------------+-----------+--------------+
| FLOOR(5) | FLOOR(5.66) | FLOOR(-4) | FLOOR(-4.66) |
+----------+-------------+-----------+--------------+
|        5 |           5 |        -4 |           -5 |
+----------+-------------+-----------+--------------+
1 row in set (0.00 sec)
由运行结果可知，小于 5，5.66，-4，-4.66 的最大整数依次是 5，5，-4，-5。
## RAND函数：生成随机数
MySQL RAND() 函数被调用时，可以产生一个在 0 和 1 之间的随机数。
mysql>  SELECT RAND(), RAND(), RAND();
+------------------+-----------------+------------------+
| RAND()           | RAND()          | RAND()           |
+------------------+-----------------+------------------+
| 0.45464584925645 | 0.1824410643265 | 0.54826780459682 |
+------------------+-----------------+------------------+
1 row in set (0.00 sec) 
由运行结果可知，每次调用 RAND() 函数，都会随机生成一个 0~1 之间的随机数 。

当使用整数作为参数调用时，RAND() 使用该值作为随机数的种子发生器。每次种子使用给定值生成，RAND() 将产生一个可重复的系列数字：
mysql> SELECT RAND(1),RAND(),RAND(1);
+---------------------+--------------------+---------------------+
| RAND(1)             | RAND()             | RAND(1)             |
+---------------------+--------------------+---------------------+
| 0.40540353712197724 | 0.7901452330780637 | 0.40540353712197724 |
+---------------------+--------------------+---------------------+
1 row in set (0.00 sec)
由运行结果可知，当向 RAND() 函数中传入一个整数作为参数是，RAND() 函数产生的随机数可以重复。
## SIGN函数：返回参数的符号
在 MySQL 中符号函数 SIGN(x) 返回参数的符号，x 的值为负、零和正时返回结果依次为 -1、0 和 1。

【实例】使用 SIGN 函数返回参数的符号，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT SIGN(-6),SIGN(0),SIGN(34);
+----------+---------+----------+
| SIGN(-6) | SIGN(0) | SIGN(34) |
+----------+---------+----------+
|       -1 |       0 |        1 |
+----------+---------+----------+
1 row in set (0.00 sec)
由执行结果可知，SIGN(-6) 返回 -1，SIGN(0) 返回 0，SIGN(34) 返回 1。
## POW和POWER函数：求次方
MySQL POW(x,y) 函数和 POWER(x,y) 函数用于计算 x 的 y 次方。

【实例】使用 POW(x,y) 和 POWER(x,y) 函数对参数 x 进行 y 次方的求值。输入 SQL 语句和执行结果如下。
mysql> SELECT POW(5,-2),POW(10,3),POW(100,0),POWER(4,3),POWER(6,-3);
+-----------+-----------+------------+------------+----------------------+
| POW(5,-2) | POW(10,3) | POW(100,0) | POWER(4,3) | POWER(6,-3)          |
+-----------+-----------+------------+------------+----------------------+
|      0.04 |      1000 |          1 |         64 | 0.004629629629629629 |
+-----------+-----------+------------+------------+----------------------+
1 row in set (0.00 sec)
## SIN函数：求正弦值
MySQL 中正弦函数 SIN(x) 返回 x 的正弦值，其中 x 为弧度值。

【实例】使用 SIN 函数计算正弦值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT SIN(1),SIN(0.5*PI());
+--------------------+---------------+
| SIN(1)             | SIN(0.5*PI()) |
+--------------------+---------------+
| 0.8414709848078965 |             1 |
+--------------------+---------------+
1 row in set (0.15 sec)
提示：PI() 函数返回圆周率（3.141593）
## ASIN函数：求反正弦值
MySQL 中反正弦函数 ASIN(x) 返回 x 的反正弦值，若 x 不在 -1 到 1 的范围之内，则返回 NULL。

【实例】使用 ASIN 函数计算反正弦值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT ASIN(0.8414709848078965),ASIN(2);
+--------------------------+---------+
| ASIN(0.8414709848078965) | ASIN(2) |
+--------------------------+---------+
|                        1 |    NULL |
+--------------------------+---------+
1 row in set (0.03 sec)
由结果可以看到，函数 ASIN 和 SIN 互为反函数，ASIN(2) 中的参数 2 超出了正弦值的范围，因此返回 NULL。
## COS函数：求余弦值
MySQL 中余弦函数 COS(x) 返回 x 的余弦值，x 为弧度值。

【实例】使用 COS 函数计算余弦值，输入的 SQL 语句和执行结果如下所示
mysql> SELECT COS(1),COS(0),COS(PI());
+--------------------+--------+-----------+
| COS(1)             | COS(0) | COS(PI()) |
+--------------------+--------+-----------+
| 0.5403023058681398 |      1 |        -1 |
+--------------------+--------+-----------+
1 row in set (0.03 sec)
由结果可以看到，COS(0) 的值为 1，COS(PI()) 的值为 -1，COS(1) 的值为 0.5403023058681398。
## ACOS函数：求反余弦值
MySQL 中反余弦函数 ACOS(x) 。x 值的范围必须在 -1 和 1 之间，否则返回 NULL。

【实例】使用 ACOS 函数计算反余弦值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT ACOS(2),ACOS(1),ACOS(-1);
+---------+---------+-------------------+
| ACOS(2) | ACOS(1) | ACOS(-1)          |
+---------+---------+-------------------+
|    NULL |       0 | 3.141592653589793 |
+---------+---------+-------------------+
1 row in set (0.01 sec)
由结果可以看到，函数 ACOS 和 COS 互为反函数。
## TAN函数：求正切值
MySQL 中正切函数 TAN(x) 返回 x 的正切值，x 为给定的弧度值。

【实例】使用 TAN 函数计算正切值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT TAN(1),TAN(0);
+--------------------+--------+
| TAN(1)             | TAN(0) |
+--------------------+--------+
| 1.5574077246549023 |      0 |
+--------------------+--------+
1 row in set (0.03 sec)
由运行结果可知，TAN(1) 的值为 1.5574077246549023，TAN(0) 的值为 0。 
## ATAN函数：求反正切值
MySQL 中反正切 ATAN(x) 返回 x 的反正切值，正切为 x 的值。

【实例】使用 ATAN 函数计算反正切值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT ATAN(1.5574077246549023),ATAN(0);
+--------------------------+---------+
| ATAN(1.5574077246549023) | ATAN(0) |
+--------------------------+---------+
|                        1 |       0 |
+--------------------------+---------+
1 row in set (0.05 sec)
由结果可以看到，函数 ATAN 和 TAN 互为反函数。
## COT函数：求余切值
MySQL 余切函数 COT(x) 返回 x 的余切值，x 是给定的弧度值。

【实例】使用 COT 函数计算余切值，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT COT(1);
+--------------------+
| COT(1)             |
+--------------------+
| 0.6420926159343306 |
+--------------------+
1 row in set (0.00 sec)
由运行结果可知，COT(1) 的值为 0.6420926159343306。 
# 字符串函数
## LENGTH函数：获取字符串长度
MySQL LENGTH(str) 函数的返回值为字符串的字节长度，使用 uft8（UNICODE 的一种变长字符编码，又称万国码）编码字符集时，一个汉字是 3 个字节，一个数字或字母是一个字节。

【实例】使用 LENGTH 函数计算字符串长度，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT LENGTH('name'),LENGTH('数据库');
+----------------+---------------------+
|LENGTH('name')  | LENGTH('数据库')    |
+----------------+---------------------+
|              4 |                   9 |
+----------------+---------------------+
1 row in set (0.04 sec)
由运行结果可以看到，一个汉字是 3 个字节，“数据库”字符串占 9 个字节。英文字符的个数和所占的字节相同，一个字符占 1 个字节。
## CONCAT函数：字符串拼接
MySQL 中的 CONCAT(sl，s2，...) 函数返回结果为连接参数产生的字符串，或许有一个或多个参数。

若有任何一个参数为 NULL，则返回值为 NULL。若所有参数均为非二进制字符串，则结果为非二进制字符串。若自变量中含有任一二进制字符串，则结果为一个二进制字符串。

【实例】使用 CONCAT 函数连接字符串，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT CONCAT('MySQL','5.7'),CONCAT('MySQL',NULL);
+-----------------------+----------------------+
| CONCAT('MySQL','5.7') | CONCAT('MySQL',NULL) |
+-----------------------+----------------------+
| MySQL5.7              | NULL                 |
+-----------------------+----------------------+
1 row in set (0.03 sec)
由运行结果可知，CONCAT('MySQL'，'5.7') 返回两个字符串连接后的字符串；CONCAT(‘MySQL’，NULL) 中有一个参数为 NULL，因此返回结果为 NULL。
## INSERT函数：替换字符串
MySQL 中替换字符串函数 INSERT(s1，x，len，s2) 返回字符串 s1，子字符串起始于 x 位置，并且用 len 个字符长的字符串代替 s2。

若 x 超过字符串长度，则返回值为原始字符串。假如 len 的长度大于其他字符串的长度，则从位置 x 开始替换。若任何一个参数为 NULL，则返回值为 NULL。

【实例】使用 INSERT 函数进行字符串替换操作，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT INSERT('Football',2,4,'Play') AS col1,
    -> INSERT('Football',-1,4,'Play') AS col2,
    -> INSERT('Football',3,20,'Play') AS col3;
+----------+----------+--------+
| col1     | col2     | col3   |
+----------+----------+--------+
| FPlayall | Football | FoPlay |
+----------+----------+--------+
1 row in set (0.04 sec)
由执行结果可知：
第一个函数 INSERT('Football'，2，4，'Play') 将“Football”从第 2 个字符开始长度为 4 的字符串替换为 Play，结果为“FPlayall”；
第二个函数 ('Football'，-1，4，'Play') 中的起始位置 -1 超出了字符串长度，直接返回原字符串；
第三个函数 INSERT('Football'，3，20，'Play') 替换长度超出了原字符串长度，则从第 3 个字符开始，截取后面所有的字符，并替换为指定字符 Play，结果为“FoPlay”。
## LOWER函数：将字母转换成小写
MySQL 中字母小写转换函数 LOWER(str) 可以将字符串 str 中的字母字符全部转换成小写。

【实例】使用 LOWER 函数将字符串中所有的字母字符转换为小写，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT LOWER('BLUE'),LOWER('Blue');
+---------------+---------------+
| LOWER('BLUE') | LOWER('Blue') |
+---------------+---------------+
| blue          | blue          |
+---------------+---------------+
1 row in set (0.03 sec)
由结果可以看到，原来所有字母为大写的，全部转换为小写，如“BLUE”，转换之后为“blue”；大小写字母混合的字符串，小写不变，大写字母转换为小写字母，如“Blue”，转换之后为“bule”。
## UPPER函数：将字母转换成大写
MySQL 中字母大写转换函数 UPPER(str) 可以将字符串 str 中的字母字符全部转换成大写。

【实例】使用 UPPER 函数将字符串中所有的字母字符转换为大写，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT UPPER('green'),UPPER('Green');
+----------------+----------------+
| UPPER('green') | UPPER('Green') |
+----------------+----------------+
| GREEN          | GREEN          |
+----------------+----------------+
1 row in set (0.03 sec)
由结果可以看到，原来所有字母字符为小写的，全部转换为大写，如“green”，转换之后为“GREEN”；大小写字母混合的字符串，大写不变，小写字母转换为大写字母，如“Green”，转换之后为“GREEN”。
## LEFT函数：从左侧截取字符串
MySQL 中的 LEFT(s，n) 函数返回字符串 s 最左边的 n 个字符。

【实例】使用 LEFT 函数返回字符串中左边的字符，输入的 SQL 语句和执行结果如下所示。
mysql> SELECT LEFT('MySQL',2);
+-----------------+
| LEFT('MySQL',2) |
+-----------------+
| My              |
+-----------------+
1 row in set (0.04 sec)
由运行结果可知，返回字符串“MySQL”左边开始的长度为 2 的子字符串，结果为“My”。
## RIGHT函数：从右侧截取字符串
