





# 域名系统DNS
## 概述
域名系统DNS(Domain Name System)是因特网使用过的命名系统，用来把便于人们使用的机器名字转换为IP地址。

为什么机器在处理 IP 数据报时要使用 IP 地址而不使用域名呢？因为 IP地址的长度是固定的32位，如果是 IPv6地址，那就是128位，也是定长的，而域名的长度不是固定的，机器处理起来比较困难。

## 因特网的域名结构
因特网采用层次树状结构的命名方法，任何一个连接在因特网上的主机或路由器都有一个唯一的层次结构的名字，即域名。域还可以划分为子域，而子域还可继续划分为子域的子域，这样就形成了顶级域、二级域、三级域等。

从语法上讲，每一个域名都是由标号序列组成，而个标号之间用点隔开。

{% asset_img img1.png %}

DNS 规定，域名中的标号都是由英文字母和数字组成，每一个标号不超过63个字符，也不区分大小写。标号中除连字符（-）外不能使用其他标点符号。级别最低的域名写在最左边，级别最高的顶级域名写在最右边。由多个标号组成的完整域名总共不超过255个字符。DNS 既不规定一个域名需要包含多少个下级域名，也不规定每一级的域名代表什么意思。各级域名由其上一级的域名管理机构管理，而最高级的顶级域名则由 ICANN 进行管理。用这种方法可使每一个域名在整个因特网范围内是唯一的。

顶级域名TLD（Top Level Domain）分为3大类：
* 国家顶级域名，如`cn`代表中国，`us`代表美国，等。
* 通用顶级域名，如`com`（公司企业），`net`（网络服务机构），`org`（非营利性的组织），`int`（国际组织），`edu`（美国专用的教育机构），`gov`（美国的政府部门），等。
* 基础结构域名，这种顶级域名只有一个，即`arpa`，用于反向域名解析，因此又称为反向域名。


## 域名服务器
域名体系是抽象的，但具体实现域名系统则是使用分布在各地的域名服务器。

DNS 采用划分区的办法。一个服务器所负责管辖的范围叫做区。各单位根据具体情况来划分自己管辖范围的区。但在一个区中的所有节点必须是能够连通的。每个区设置相应的权限域名服务器，用来保存该区中的所有主机的域名到 IP 地址的映射。总之，DNS 服务器的管辖范围不是以域为单位，而是以区为单位。区是 DNS 服务器实际管辖的范围。区可能等于或小于域，但一定不可能大于域。

根据域名服务器所起的作用，可以把域名服务器划分为以下4种类型：
* 根域名服务器：所有的根域名服务器都知道所有的顶级域名服务器的域名和 IP 地址。
在许多情况下，根域名服务器并不直接把待查询的域名直接转换成 IP 地址，而是告诉本地域名服务器下一步应当找哪一个顶级域名服务器进行查询。
* 顶级域名服务器（TLD服务器）：负责管理在该顶级域名服务器注册的所有二级域名。当收到 DNS 查询请求时，就给出相应的回答（可能是最后的结果，也可能是下一步应当找的域名服务器的 IP 地址）。
* 权限域名服务器：负责一个区的域名服务器。当一个权限域名服务器还不能给出最后的查询回答时，就会告诉发出查询请求的 DNS 客户，下一步应当找哪一个权限域名服务器。
* 本地域名服务器：当一个主机发出 DNS 请求时，这个查询请求报文就发送给本地域名服务器。当所要查询的主机也属于同一个本地 ISP 时，该本地域名服务器立即就能将所查询的主机名转换为它的 IP 地址，而不需要再去询问其他的域名服务器。

假定域名为 m.xyz.com 的主机想知道另一个主机（域名为 y.abc.com）的 IP 地址，主要经过了以下几个步骤：
1. 主机 m.xyz.com 向本地域名服务器 dns.xyz.com 进行递归查询。
2. 本地域名服务器采用迭代查询，向一个根域名服务器查询。
3. 根域名服务器告诉本地域名服务器下一次应查询的顶级域名服务器 dns.com 的 IP 地址。
4. 本地域名服务器向顶级域名服务器 dns.com 进行查询。
5. 顶级域名服务器 dns.com 告诉本地域名服务器，下一次应该查询的权限域名服务器 dns.abc.com 的 IP 地址。
6. 本地域名服务器向权限域名服务器 dns.abc.com 进行查询。
7. 权限域名服务器 dns.abc.com 告诉本地域名服务器所查询的主机的 IP 地址。
8. 本地域名服务器最后把查询结果告诉主机 m.xyz.com。

这8步总共要使用8个 UDP 用户数据报的报文。本地域名服务器经过3次迭代查询后，从权限域名服务器 dns.abc.com 得到了主机 y.abc.com 的 IP 地址，最后把结果返回给主机 m.xyz.com。
# 文件传送协议
## FTP
文件传送协议 FTP 是使用最广泛的文件传送协议。
## FTP的基本工作原理
FTP 使用 TCP可靠的运输服务，主要功能是减少或消除在不同操作系统下处理文件的不兼容性。

FTP 使用客户服务器方式，一个 FTP 服务器进程可同时为多个客户进程提供服务。FTP 的服务器进程由两大部分组成：一个主进程，负责接收新的请求；若干个从属进程，负责处理单个请求。


## 简单文件传送给协议TFTP


# 万维网
## 概述
万维网WWW(World Wide Web)并非某种特殊的计算机网络。万维网是一个大规模的、联机式的信息存储所，英文简称Web。万维网用链接的方法能非常方便的从因特网上的一个站点访问另一个站点。

## 统一资源定位符URL
### URL的格式
URL 是用来表示从因特网上得到的资源位置和访问这些资源的方法。URL 给资源的位置提供一种抽象的识别方法，并用这种方法给资源定位。只要能够给资源定位，系统就可以对资源进行各种操作。

这里所说的资源是指在因特网上可以被访问的任何对象，包括文件目录、文件、文档等，以及与因特网相连的任何形式的数据。

URL 是与因特网相连的机器上的任何可访问对象的一个指针。URL 由以下4部分组成：`协议://主机:端口/路径`。


## 超文本传送协议HTTP
## 万维网的文档
## 万维网的信息检索系统
# 电子邮件
一个电子邮件系统应具有3个主要组成构件：用户代理、邮件服务器以及邮件发送协议（如SMTP）和邮件读取协议（如POP3）。

## 简单邮件传送协议SMTP
SMTP 规定了在两个相互通信的 SMTP 进程之间应如何交换信息。由于 SMTP 使用客户服务器方式，因此负责发送邮件的 SMTP 进程就是 SMTP 客户，负责接收邮件的 SMTP 进程就是 SMTP 服务器。至于邮件内部的格式，邮件如何存储，以及邮件系统应以多快的速度来发送邮件，SMTP 都未做规定。

SMTP 规定的14条命令和21种应答信息。每条命令用4个字母组成功，而每一种应答信息一般只有一行信息，由一个3位数字的代码开始，后面附上（也可不附上）很简单的文字说明。

SMTP 通信的三个阶段：
1. 连接建立
发件人的邮件送到发送方邮件服务器的邮件缓存后，SMTP 客户就每隔一定时间对邮件缓存扫描一次，发现有邮件，就使用 SMTP 的端口号（25）与接收方邮件服务器的 SMTP 服务器建立 TCP 连接。在建立连接后，接收方 SMTP 服务器要发出"220 Service ready"（服务就绪）。然后 SMTP 客户向 SMTP 服务器发送 HELO 命令，附上发送方的主机名。SMTP 服务器若有能力接收邮件，则回答"250 OK"，表示已准备好接收。若 SMTP 服务器不可用，则回答"421 Service not available"。

如果一定时间内发送不了邮件，邮件服务器会把这个情况通知发件人。

SMTP 不使用中间的邮件服务器。不管发送方和接收方的邮件服务器相隔多远，不管在邮件的传送过程中要经过多少个路由器，TCP 连接总是在发送方和接收方这两个邮件服务器之间建立连接。当接收方邮件服务器出现故障而不能工作时，发送方邮件服务器只能等待一段时间后再尝试和该邮件服务器建立 TCP 连接。
2. 邮件传送
邮件的传送从 MAIL 命令开始。





3. 连接释放
邮件发送完毕后，SMTP 客户应发送 QUIT 命令。SMTP 服务器返回的信息是"221(服务关闭)"，表示 SMTP 同意释放 TCP 连接。邮件传送的全部过程结束。

## 电子邮件的信息格式
## 邮件读取协议POP3和IMAP
### POP3
邮局协议 POP 是一个简单的但功能有限的邮件读取协议，POP3 是是邮局协议 POP 的第3个版本，该协议工作在 TCP 协议的110号端口。POP 也使用客户服务器的工作方式。在接收邮件的用户 PC 机中的用户代理必须运行 POP 客户程序，在收件人所连接的 ISP 的邮件服务器中则运行 POP 服务器程序。当然，这个 ISP 的邮件服务器还必须运行 SMTP 服务器程序，以便接收发送方邮件服务器的 SMTP 客户程序发来的邮件。POP 服务器只有在用户输入鉴别信息后才允许对邮箱进行读取。

POP3 协议的一个特点就是只要用户从 POP 服务器读取了邮件，POP 服务器就把该邮件删除。这在某些情况下不够方便。为了解决这个问题，POP3 进行了一些功能扩充，其中包括让用户能够事先设置邮件读取后仍然在 POP 服务器中存放的时间。
### IMAP
网际报文存储协议 IMAP 也是客户服务器的工作方式。在使用 IMAP 时，在用户的 PC 机上运行 IMAP 客户程序，然后与接收方的邮件服务器上的 IMAP 服务器程序建立 TCP 连接。用户在自己的 PC 机上可以操作邮件服务器的邮箱，就像在本地操作一样，因此 IMAP 是一个联机协议。当用户 PC 机上的 IMAP 客户程序打开 IMAP 服务器的邮箱时，用户就可以看到邮件的首部。若用户需要打开某个邮件，则该邮件才传到用户的计算机上。用户可以根据需要为自己的邮箱创建便于分类管理的层次式的邮箱文件夹，并能够将存放的邮件从某一个文件夹中移动到另一个文件夹中。用户也可按照某种条件对邮件进行查找。在用户未发出删除邮件的命令之前，IMAP 服务器邮箱中的邮件一直保存着。

IMAP 最大的好处是用户可以随时上网阅读和处理自己的邮件。IMAP 还允许收件人只读取邮件中的某一部分内容。

IMAP 的缺点是如果用户没有将邮件复制到自己的 PC 机上，则邮件一直是存放在 IMAP 服务器上。因此，用户需要经常和 IMAP 服务器建立连接。
## 基于万维网的电子邮件
## 通用因特网邮件扩充MIME
### MIME概述
电子邮件协议 SMTP 有以下缺点：
* SMTP 不能传送可执行文件或其他的二进制对象。
* SMTP 限于传送7位的 ASCII 码。许多其他非英语国家的文字就无法传送。
* SMTP 服务器会拒绝超过一定长度的邮件。
* 某些 SMTP 的实现并没有完全按照 SMTP 的因特网标准。

于是在这种情况下就提出了通用因特网邮件扩充MIME。MIME 并没有改动或取代 SMTP。


# 动态主机配置协议DHCP
# 简单网络管理协议SNMP
## 网络管理的基本概念
简单网络管理协议 SNMP 中的管理程序和代理程序按客户服务区方式工作。管理程序运行 SNMP 客户程序，而代理程序运行 SNMP 服务器程序。在被管对象上运行的 SNMP 服务器不停地监听来自管理站的 SNMP 客户程序的请求。一旦发现了，就立即返回管理站所需的信息，或执行某个动作。在网管系统中往往是一个（或少数几个）客户程序与很多的服务器程序进行交互。
## 管理信息结构SMI
## 管理信息库MIB
## SNMP的协议数据单元和报文
SNMP 的操作只有两种基本的管理功能，即：
* 读操作，用 Get 报文来检测各被管理对象的状况。
* 写操作，用 Set 报文来改变各被管理对象的状况。

SNMP 的这些功能通过探询操作来实现，即 SNMP 管理进程定时向被管理设备周期性的发送探询信息。上述时间间隔可通过 SNMP 的管理信息库 MIB 来建立。

探询的好处是：第一，可使系统相对简单；第二，能限制通过网络所产生的管理信息的通信量。但探询管理不够格灵活，而且所能管理的设备数目不能太多。探询系统的开销也大。如探询频繁而未得到有用的报告，则通信线路和 CPU 周期就被浪费了。

但 SNMP 不是完全的探询协议，它允许不经过询问就能发送某些信息。这种信息称为陷阱（trap），表示它能够捕捉事件。但这种陷阱信息的参数是受限制的。

当被管对象的代理检测到有事件发生时，就检测其门限值。代理只向管理进程报告达到某些门限值的事件（过滤）。这种方法的好处是：第一，仅在严重事件发生时才发送陷阱；第二，陷阱信息很简单且所需字节数很少。

总之，使用探询以维持对网络资源的实时监控，同时也采用陷阱机制报告特殊事件，使得 SNMP 成为一种有效的网络管理协议。

SNMP 使用无连接的 UDP，因此在网络上传送 SNMP 报文的开销较小。

在运行代理程序的服务器端用161端口来接收 Get 和 Set 报文和发送响应报文，但运行管理程序的客户端则使用162端口来接收来自各代理的 trap 报文。
## 网络管理的基本概念
