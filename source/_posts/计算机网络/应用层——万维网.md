


# 万维网概述
万维网 WWW (World Wide Web) 并非某种特殊的计算机网络。万维网是一个大规模的、联机式的信息储藏所。

万维网用链接的方法能非常方便地从互联网上的一个站点访问另一个站点，从而主动地按需获取丰富的信息。这种访问方式称为“链接”。

{% asset_img img1.png %}

## 超媒体与超文本
万维网是分布式超媒体系统，它是超文本系统的扩充。

一个超文本由多个信息源链接成。利用一个链接可使用户找到另一个文档。这些文档可以位于世界上任何一个接在互联网上的超文本系统中。超文本是万维网的基础。

超媒体与超文本的区别是文档内容不同。超文本文档仅包含文本信息，而超媒体文档还包含其他表示方式的信息，如图形、图像、声音、动画，甚至活动视频图像。
## 万维网的工作方式
万维网以客户 - 服务器方式工作。

浏览器就是在用户计算机上的万维网客户程序。万维网文档所驻留的计算机则运行服务器程序，因此这个计算机也称为万维网服务器。

客户程序向服务器程序发出请求，服务器程序向客户程序送回客户所要的万维网文档。

在一个客户程序主窗口上显示出的万维网文档称为页面。
## 万维网必须解决的问题
1. 怎样标志分布在整个互联网上的万维网文档？ 
使用统一资源定位符 URL(`Uniform Resource Locator`) 来标志万维网上的各种文档。
使每一个文档在整个互联网的范围内具有唯一的标识符 URL。 
2. 用何协议实现万维网上各种超链的链接？ 
在万维网客户程序与万维网服务器程序之间进行交互所使用的协议，是超文本传送协议 HTTP(`HyperText Transfer Protocol`)。
HTTP 是一个应用层协议，它使用 TCP 连接进行可靠的传送。 
3. 怎样使各种万维网文档都能在互联网上的各种计算机上显示出来，同时使用户清楚地知道在什么地方存在着超链？ 
超文本标记语言 HTML(`HyperText Markup Language`) 使得万维网页面的设计者可以很方便地用一个超链从本页面的某处链接到互联网上的任何一个万维网页面，并且能够在自己的计算机屏幕上将这些页面显示出来。
4. 怎样使用户能够很方便地找到所需的信息？ 
为了在万维网上方便地查找信息，用户可使用各种的搜索工具（即搜索引擎）。

# 统一资源定位符 URL
## 1. URL 的格式
资源定位符 URL 是对可以从互联网上得到的资源的位置和访问方法的一种简洁表示。

URL 给资源的位置提供一种抽象的识别方法，并用这种方法给资源定位。

只要能够对资源定位，系统就可以对资源进行各种操作，如存取、更新、替换和查找其属性。

URL 相当于一个文件名在网络范围的扩展。因此 URL 是与互联网相连的机器上的任何可访问对象的一个指针。

由以冒号隔开的两大部分组成，并且在 URL 中的字符对大写或小写没有要求。
URL 的一般形式是：
```
<协议>://<主机>:<端口>/<路径> 
```
# 超文本传送协议 HTTP
## 1.  HTTP 的操作过程
为了使超文本的链接能够高效率地完成，需要用 HTTP 协议来传送一切必须的信息。

从层次的角度看，HTTP 是面向事务的应用层协议，它是万维网上能够可靠地交换文件（包括文本、声音、图像等各种多媒体文件）的重要基础。 
### 万维网的工作过程

{% asset_img img2.png %}

每个万维网网点都有一个服务器进程，它不断地监听 TCP 的端口 80，以便发现是否有浏览器向它发出连接建立请求。

一旦监听到连接建立请求并建立了 TCP 连接之后，浏览器就向万维网服务器发出浏览某个页面的请求，服务器接着就返回所请求的页面作为响应。

最后，TCP 连接就被释放了。

在浏览器和服务器之间的请求和响应的交互，必须按照规定的格式和遵循一定的规则。这些格式和规则就是超文本传送协议 HTTP。

HTTP 规定在 HTTP 客户与 HTTP 服务器之间的每次交互，都由一个 ASCII 码串构成的请求和一个类似的通用互联网扩充，即“类 MIME (MIME-like)”的响应组成。

HTTP 报文通常都使用 TCP 连接传送。

用户浏览页面的两种方法：
1. 在浏览器的地址窗口中键入所要找的页面的 URL。
2. 在某一个页面中用鼠标点击一个可选部分，这时浏览器会自动在互联网上找到所要链接的页面。

### HTTP 的主要特点
HTTP 使用了面向连接的 TCP 作为运输层协议，保证了数据的可靠传输。

HTTP 协议本身也是无连接的，虽然它使用了面向连接的 TCP 向上提供的服务。

HTTP 是面向事务的客户服务器协议。

HTTP 1.0 协议是无状态的。
### 请求一个万维网文档所需的时间

{% asset_img img3.png %}

### 持续连接
HTTP/1.1 协议使用持续连接。

万维网服务器在发送响应后仍然在一段时间内保持这条连接，使同一个客户（浏览器）和该服务器可以继续在这条连接上传送后续的 HTTP 请求报文和响应报文。

这并不局限于传送同一个页面上链接的文档，而是只要这些文档都在同一个服务器上就行。

持续连接的两种工作方式：
* 非流水线方式：客户在收到前一个响应后才能发出下一个请求。这比非持续连接的两倍 RTT 的开销节省了建立 TCP 连接所需的一个 RTT 时间。但服务器在发送完一个对象后，其 TCP 连接就处于空闲状态，浪费了服务器资源。
* 流水线方式：客户在收到 HTTP 的响应报文之前就能够接着发送新的请求报文。一个接一个的请求报文到达服务器后，服务器就可连续发回响应报文。使用流水线方式时，客户访问所有的对象只需花费一个 RTT时间，使 TCP 连接中的空闲时间减少，提高了下载文档效率。

## 2. 代理服务器
代理服务器 (proxy server) 又称为万维网高速缓存 (Web cache)，它代表浏览器发出 HTTP 请求。

万维网高速缓存把最近的一些请求和响应暂存在本地磁盘中。

当与暂时存放的请求相同的新请求到达时，万维网高速缓存就把暂存的响应发送出去，而不需要按 URL 的地址再去互联网访问该资源。 

使用高速缓存可减少访问互联网服务器的时延。

{% asset_img img4.png %}

### 使用高速缓存的情况

{% asset_img img5.png %}
{% asset_img img6.png %}
{% asset_img img7.png %}
{% asset_img img8.png %}
{% asset_img img9.png %}

## 3. HTTP 的报文结构
HTTP 有两类报文：
* 请求报文——从客户向服务器发送请求报文。
* 响应报文——从服务器到客户的回答。

由于 HTTP 是面向正文的 (text-oriented)，因此在报文中的每一个字段都是一些 ASCII 码串，因而每个字段的长度都是不确定的。

### HTTP 的报文结构（请求报文）
报文由三个部分组成，即请求行、首部行和实体主体。

{% asset_img img10.png %}

方法”是面向对象技术中使用的专门名词。所谓“方法”就是对所请求的对象进行的操作，因此这些方法实际上也就是一些命令。因此，请求报文的类型是由它所采用的方法决定的。

“URL”是所请求的资源的 URL。

“版本”是 HTTP 的版本。

HTTP 请求报文的一些方法

| 方法 | 意义 |
| :--: | :--: |
| OPTION | 请求一些选项的信息 |
| GET | 请求读取由 URL所标志的信息 |
| HEAD | 请求读取由 URL所标志的信息的首部 |
| POST | 给服务器添加信息 |
| PUT | 在指明的 URL下存储一个文档 |
| DELETE | 删除指明的 URL所标志的资源 |
| TRACE | 用来进行环回测试的请求报文 |
| CONNECT | 用于代理服务器 |

### HTTP 的报文结构（请求报文）

{% asset_img img11.png %}

状态行包括三项内容，即 HTTP 的版本，状态码，以及解释状态码的简单短语。

状态码都是三位数字：
* 1xx 表示通知信息的，如请求收到了或正在进行处理。
* 2xx 表示成功，如接受或知道了。
* 3xx 表示重定向，表示要完成请求还必须采取进一步的行动。
* 4xx 表示客户的差错，如请求中有错误的语法或不能完成。
* 5xx 表示服务器的差错，如服务器失效无法完成请求。

## 4. 在服务器上存放用户的信息
万维网站点可以使用 Cookie 来跟踪用户。

Cookie 表示在 HTTP 服务器和客户之间传递的状态信息。

使用 Cookie 的网站服务器为用户产生一个唯一的识别码。利用此识别码，网站就能够跟踪该用户在该网站的活动。