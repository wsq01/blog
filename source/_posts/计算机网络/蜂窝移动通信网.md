


# 蜂窝无线通信技术简介
蜂窝移动网络的发展非常迅速，到目前为止，世界上先后已有超过了30种不同的标准。

第一代（1G）蜂窝无线通信是为话音通信设计的模拟 FDM 系统。

第二代（2G）蜂窝无线通信提供低速数字通信（短信服务），其代表性体制就是最流行的 GSM 系统。

2.5G 技术是从 2G 向第三代（3G）过渡的衔接性技术，如 GPRS 和 EDGE 等。

第三代（3G）移动通信和计算机网络的关系非常密切，它使用 IP 的体系结构和混合的交换机制（电路交换和分组交换），能够提供移动宽带多媒体业务（话音、数据、视频等，可收发电子邮件，浏览网页，进行视频会议等），如 CDMA2000，WCDMA 和 TD-SCDMA。

从3G开始以后的各代蜂窝移动通信都是以传输数据业务为主的通信系统，而且必须兼容 2G 的功能（即能够通电话和发送短信），这就是所谓的向后兼容。 

第四代（4G）正式名称是 IMT-Advanced(`International Mobile Telecommunications-Advanced`)，意思是高级国际移动通信。

4G 的一个重要技术指标就是要实现更高的数据率。目标峰值数据率是：固定的和低速移动通信时应达到 1 Gbit/s，在高速移动通信时（如在火车、汽车上）应达到 100 Mbit/s。

4G 现有两个国际标准：
* LTE (`Long-Term Evolution`)： 又分为时分双工 TD-LTE 和频分双工 FDD-LTE 两种。把带宽增加到 20 MHz，采用了高阶调制64QAM和MIMO技术。
* LTE-A (LTE-Advanced)：LTE 的升级版，俗称为 3.9G。带宽高达 100 MHz。

## GSM 蜂窝通信系统的重要组成构件 

{% asset_img img1.png %}

用一个个相互拼接的六角形的小区就可以组成很大的蜂窝状的无线通信系统。每个基站的发射功率既要能够覆盖本小区，也不能太大以致干扰了邻近小区的通信。

采用蜂窝形状结构的小区的好处是可以最大限度的进行频分复用。频分复用是指在相距一定距离的不同小区可以采用相同的频率而不会互相干扰。


# 移动 IP
移动IP(Mobile IP)又称为移动 IP 协议。这种技术允许计算机移动到外地时，仍然保留其原来的 IP 地址。

移动 IP 要解决的问题：使用户的移动性对上层的网络应用是透明的。
## 移动 IP 使用的基本概念

{% asset_img img2.png %}

移动站A必须有一个原始地址，即永久地址，或归属地址。移动站原始连接到的网络叫做归属网络。归属网络中使用的代理叫做归属代理。

当移动站A移动到另一个地点，接入的网络称为被访网络或外地网络。被访网络中使用的代理叫做外地代理。为移动站A在被访网络中创建的临时地址叫做转交地址。
## 通信者B和移动站A的四个重要通信步骤
B发送给A的数据报被A的归属代理截获了（只有当A离开归属网络时，归属代理才能截获发给A的数据报）。

由于归属代理已经知道了A的转交地址，因此归属代理把B发来的数据报进行再封装，新的数据报的目的地址是A现在的转交地址。新封装的数据报发送到被访网络的外地代理。这里使用的就是以前讲过的隧道技术或IP-in-IP。

被访网络中的外地代理把收到的封装的数据报进行拆封，取出B发送的原始数据报，然后转发给移动站A。这个数据报的目的地址就是A的永久地址。A收到B发送的原始数据报后，也得到了B的IP地址。

如果现在A要向B发送数据报，那么情况就比较简单。A仍然使用自己的永久地址作为数据报的源地址，用B的IP地址作为数据报的目的地址。这个数据报显然没有必要在通过A的归属代理进行转发了。
## 网络层应增加的新功能
* 移动站到外地代理的协议。
* 外地代理到归属代理的登记协议。
* 归属代理数据报封装协议。
* 外地代理拆封协议。

## 三角形路由选择问题
间接路由选择：把数据报发往移动站的归属网络，由归属代理完成以后的寻址工作，进而完成数据报转发的方式。

间接路由选择可能会引起数据报转发的低效，文献中称之为三角形路由选择问题(triangle routing problem)。意思是：本来在B和A之间可能有一条更有效的路由，但现在要走另外两条路：先要把数据报从B发送到A的归属代理，然后再转发给漫游到被访网络的A。
## 使用直接路由选择向移动站发送数据报
{% asset_img img3.png %}

让通信者B创建一个通信者代理，让这个通信者代理向归属代理询问到移动站在被访网络的转交地址。然后由通信者代理把数据报用隧道技术发送到被访网络的外地代理，最后再由这个外地代理拆封，把数据报转发给移动站。但这是以增加复杂性为代价的。

B的通信者代理从移动站A的归属代理得到A所漫游到的被访网络N1的外地代理。我们把移动站首次漫游到的被访网络的外地代理称为锚外地代理(anchor foreign agent)。

通信者代理把B发给A的数据报再封装后，发送到A的锚外地代理。
锚外地代理把拆封后的数据报发送给A。
A移动到另一个被访网络N2。
A向被访网络N2的新外地代理登记。
新外地代理把A的新转交地址告诉锚外地代理。
当锚外地代理收到发给A的封装数据报后，就用A的新转交地址对数据报进行再封装，然后发送给被访网络N2上的新外地代理。在拆封后转发给移动站A。
同理，如果移动站再漫游到另一个网络，则这个网络的外地代理将仍然要和锚外地代理联 系，以便让锚外地代理以后把发给A的数据报转发过来。
# 蜂窝移动通信网中对移动用户的路由选择
假定有一个通信者对一个手机移动通信用户进行呼叫。下图是这个呼叫过程所涉及到的一些重要网络构件。
{% asset_img img4.png %}

呼叫过程步骤：
1. 找到移动用户的归属网络。
2. 归属 MSC 向其 HLR 查询现在被叫移动用户的位置。HLR 向归属 MSC 返回被叫移动用户的移动站漫游号 MSRN。
3. 归属 MSC 按照所得到的漫游号码 MSRN 进行呼叫的第二段，把通信者发起的呼叫从归属 MSC 传送到被访网络的 MSC，再传送到该移动用户所漫游到的小区的基站。于是，整个的呼叫就完成了。

# GSM 中的切换
切换就是移动用户与相关联的基站发生了改变。

移动用户在和一个基站相关联期间，会周期性地测量来自其当前基站及其邻近基站的信标信号强度，并将测量结果以每秒 1 ~ 2 次频率报告给当前基站。根据这些测量数据以及邻近蜂窝的当前负载情况，当前基站决定是否发起切换。

移动站的切换可能仍处在同一个 MSC 的控制下，而只是相关联的基站发生了变化。但在许多情况下，移动站的切换是相关联的 MSC 都改变了。在这种情况下，向移动站的呼叫路由会有很大的变化。 

{% asset_img img5.png %}

# 无线网络对高层协议的影响
无线网络在移动站漫游时，会经常更换移动用户到无线网络的连接点（即到移动站相关联的基站）。这样，网络的连接就会发生很短时间的中断。

由于移动用户更新相关联的基站需要一定的时间，这就可能造成TCP报文段的丢失。只要出现TCP报文段频繁丢失，TCP的拥塞控制就会采取措施，减小其拥塞窗口，从而使TCP发送方的报文段发送速率降低。

当无线信道出现严重的比特差错，或由于切换产生了报文段丢失，减小TCP发送方的拥塞窗口对改善网络性能并不会有任何好处。

解决方法：
* 本地恢复。这是指差错在什么地方出现，就在什么地方改正。
* 让 TCP 发送方知道什么地方使用了无线链路。只有当TCP能够确知，是有线网络部分发生了拥塞时，TCP才采用拥塞控制的策略。
* 把含有移动用户的端到端 TCP 连接拆成两个互相串接的 TCP 连接。 
